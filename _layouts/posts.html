<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ page.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header>
    <h1><a href="/" class="blog-title">JosieOpt Optimization Blog</a></h1>
    <nav>
      <a href="/">Home</a>
      <a href="/posts">Posts</a>
      <a href="/about">About</a>
    </nav>
  </header>

  <div class="container posts-layout">
    <!-- Left sidebar: Years -->
    <aside class="sidebar-left">
      <h3>Years</h3>
      <ul>
        {% if site.posts.size > 0 %}
          {% assign years = site.posts | map: 'date' | map: 'year' | uniq | sort: 'reverse' %}
          {% for year in years %}
            <li><a href="/posts/year/{{ year }}">{{ year }}</a></li>
          {% endfor %}
        {% else %}
          <li>No posts yet.</li>
        {% endif %}
      </ul>
    </aside>

    <!-- Main content -->
    <main class="posts-content">
      <input 
        type="text" 
        id="searchInput" 
        placeholder="Search posts..." 
        onkeyup="filterPosts()" 
        aria-label="Search posts"
      >

      <ul id="postList" style="list-style: none; padding-left: 0; margin-top: 1rem;">
        {% if site.posts.size > 0 %}
          {% for post in site.posts %}
            <li class="post-preview" style="margin-bottom: 1.5rem;">
              <a href="{{ post.url }}">{{ post.title }}</a> â€“ 
              <small>{{ post.date | date: "%b %-d, %Y" }}</small>
              {% if post.tags %}
                <br />
                <small>
                  Tags: 
                  {% for tag in post.tags %}
                    <a href="/posts/tag/{{ tag | slugify }}">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
                  {% endfor %}
                </small>
              {% endif %}
            </li>
          {% endfor %}
        {% else %}
          <li>No posts available yet.</li>
        {% endif %}
      </ul>
    </main>

    <!-- Right sidebar: Tags -->
    <aside class="sidebar-right">
      <h3>Tags</h3>
      <ul>
        {% if site.tags %}
          {% assign all_tags = site.tags | sort %}
          {% for tag in all_tags %}
            <li>
              <a href="/posts/tag/{{ tag[0] | slugify }}">
                {{ tag[0] }} ({{ tag[1].size }})
              </a>
            </li>
          {% endfor %}
        {% else %}
          <li>No tags available.</li>
        {% endif %}
      </ul>
    </aside>
  </div>

  <script src="/search.js"></script>
</body>
</html>
